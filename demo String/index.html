<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>

   

// // BÀI TOÁN 1:

// const String2 = `===================>EventP6S_GET_SET_CONFIG_BY_HTTP HTTP/1.0 200 OK
// Server: Server: CGI/2.0.5
// Content-Length: 4664
// Content-Type: application/xml
// Connection: close

// <?xml version="1.0" encoding="UTF-8" ?>
// <RecordFileList Version="1.0">
//     <RecordFile Version="1.0">
//         <PathName>/dat/mmcblk0p1/video/20221116</PathName>
//         <FileName>20221116144540-20221116145545.mp4</FileName>
//         <StartTime>20221116 14:45:40</StartTime>
//         <StopTime>20221116 14:55:45</StopTime>
//         <FileSize>62969704</FileSize>
//     </RecordFile>
//     <RecordFile Version="1.0">
//         <PathName>/dat/mmcblk0p1/video/20221116</PathName>
//         <FileName>20221116143536-20221116144540.mp4</FileName>
//         <StartTime>20221116 14:35:36</StartTime>
//         <StopTime>20221116 14:45:40</StopTime>
//         <FileSize>57918924</FileSize>
//     </RecordFile>
//     <RecordFile Version="1.0">
//         <PathName>/dat/mmcblk0p1/video/20221116</PathName>
//         <FileName>20221116142534-20221116143536.mp4</FileName>
//         <StartTime>20221116 14:25:34</StartTime>
//         <StopTime>20221116 14:35:36</StopTime>
//         <FileSize>58780746</FileSize>
//     </RecordFile>
//     <RecordFile Version="1.0">
//         <PathName>/dat/mmcblk0p1/video/20221116</PathName>
//         <FileName>20221116141530-20221116142534.mp4</FileName>
//         <StartTime>20221116 14:15:30</StartTime>
//         <StopTime>20221116 14:25:34</StopTime>
//         <FileSize>58209386</FileSize>
//     </RecordFile>
//     <RecordFile Version="1.0">
//         <PathName>/dat/mmcblk0p1/video/20221116</PathName>
//         <FileName>20221116140526-20221116141530.mp4</FileName>
//         <StartTime>20221116 14:05:26</StartTime>
//         <StopTime>20221116 14:15:30</StopTime>
//         <FileSize>61679567</FileSize>
//     </RecordFile>
//     <RecordFile Version="1.0">
//         <PathName>/dat/mmcblk0p1/video/20221116</PathName>
//         <FileName>20221116135522-20221116140526.mp4</FileName>
//         <StartTime>20221116 13:55:22</StartTime>
//         <StopTime>20221116 14:05:26</StopTime>
//         <FileSize>77947462</FileSize>
//     </RecordFile>
//     <RecordFile Version="1.0">
//         <PathName>/dat/mmcblk0p1/video/20221116</PathName>
//         <FileName>20221116134518-20221116135522.mp4</FileName>
//         <StartTime>20221116 13:45:18</StartTime>
//         <StopTime>20221116 13:55:22</StopTime>
//         <FileSize>68906659</FileSize>
//     </RecordFile>
//     <RecordFile Version="1.0">
//         <PathName>/dat/mmcblk0p1/video/20221116</PathName>
//         <FileName>20221116133516-20221116134518.mp4</FileName>
//         <StartTime>20221116 13:35:16</StartTime>
//         <StopTime>20221116 13:45:18</StopTime>
//         <FileSize>87329347</FileSize>
//     </RecordFile>
//     <RecordFile Version="1.0">
//         <PathName>/dat/mmcblk0p1/video/20221116</PathName>
//         <FileName>20221116132512-20221116133516.mp4</FileName>
//         <StartTime>20221116 13:25:12</StartTime>
//         <StopTime>20221116 13:35:16</StopTime>
//         <FileSize>70203212</FileSize>
//     </RecordFile>
//     <RecordFile Version="1.0">
//         <PathName>/dat/mmcblk0p1/video/20221116</PathName>
//         <FileName>20221116131508-20221116132512.mp4</FileName>
//         <StartTime>20221116 13:15:08</StartTime>
//         <StopTime>20221116 13:25:12</StopTime>
//         <FileSize>52063112</FileSize>
//     </RecordFile>
//     <RecordFile Version="1.0">
//         <PathName>/dat/mmcblk0p1/video/20221116</PathName>
//         <FileName>20221116130504-20221116131508.mp4</FileName>
//         <StartTime>20221116 13:05:04</StartTime>
//         <StopTime>20221116 13:15:08</StopTime>
//         <FileSize>50739542</FileSize>
//     </RecordFile>
//     <RecordFile Version="1.0">
//         <PathName>/dat/mmcblk0p1/video/20221116</PathName>
//         <FileName>20221116125500-20221116130504.mp4</FileName>
//         <StartTime>20221116 12:55:00</StartTime>
//         <StopTime>20221116 13:05:04</StopTime>
//         <FileSize>62344623</FileSize>
//     </RecordFile>
//     <RecordFile Version="1.0">
//         <PathName>/dat/mmcblk0p1/video/20221116</PathName>
//         <FileName>20221116124456-20221116125500.mp4</FileName>
//         <StartTime>20221116 12:44:56</StartTime>
//         <StopTime>20221116 12:55:00</StopTime>
//         <FileSize>64010101</FileSize>
//     </RecordFile>
//     <RecordFile Version="1.0">
//         <PathName>/dat/mmcblk0p1/video/20221116</PathName>
//         <FileName>20221116123452-20221116124456.mp4</FileName>
//         <StartTime>20221116 12:34:52</StartTime>
//         <StopTime>20221116 12:44:56</StopTime>
//         <FileSize>66297214</FileSize>
//     </RecordFile>
//     <RecordFile Version="1.0">
//         <PathName>/dat/mmcblk0p1/video/20221116</PathName>
//         <FileName>20221116122448-20221116123452.mp4</FileName>
//         <StartTime>20221116 12:24:48</StartTime>
//         <StopTime>20221116 12:34:52</StopTime>
//         <FileSize>83425167</FileSize>
//     </RecordFile>
// </RecordFileList>`


// let arr1 = str.split('<RecordFile Version="1.0">');
//             let arrFilter = arr.slice(1, arr.length)
//             let arrResult1 = [];
//             arrFilter.forEach(el => {
//                 let data = el.split("        ");
//                 let pathName = data[1].split(">")[1].split("<")[0];
//                 let fileName = data[2].split(">")[1].split("<")[0];
//                 let startTime = data[3].split(">")[1].split("<")[0];
//                 let stopTime = data[4].split(">")[1].split("<")[0];
//                 let fileSize = data[5].split(">")[1].split("<")[0];
//                 let response = {
//                     pathName: pathName,
//                     fileName: fileName,
//                     startTime: startTime,
//                     stopTime: stopTime,
//                     fileSize: fileSize
//                 }
//                 arrResult.push(response)
//             })
//             console.log(arrResult);


      // BÀI TOÁN 2 :
      const stringHandle = `HTTP/1.0 200 OK
Server: Server: CGI/2.0.5
Content-Length: 1320
Content-Type: application/xml
Connection: close

<?xml version="1.0" encoding="UTF-8" ?>
<Trigger Version="1.0">
    <NotifyAMS Version="1.0">
        <Enable>false</Enable>
    </NotifyAMS>
    <BeepAlert Version="1.0">
        <Enable>true</Enable>
    </BeepAlert>
    <FullScreen Version="1.0">
        <Enable>false</Enable>
    </FullScreen>
    <Mail Version="1.0">
        <Enable>true</Enable>
    </Mail>
    <Ftp Version="1.0">
        <Enable>true</Enable>
    </Ftp>
    <Push Version="1.0">
        <Enable>true</Enable>
    </Push>
    <AlarmOut Version="1.0">
        <Enable>true</Enable>
        <AlarmOutMask>1</AlarmOutMask>
    </AlarmOut>
    <Snapshot Version="1.0">
        <Enable>false</Enable>
        <SnapshotMask>1</SnapshotMask>
    </Snapshot>
    <Record Version="1.0">
        <Enable>true</Enable>
        <RecordMask>1</RecordMask>
    </Record>
    <PTZ Version="1.0">
        <Enable>false</Enable>
        <PTZActionList Version="1.0">
            <PTZAction Version="1.0">
                <ChannelID>1</ChannelID>
                <ActionName>none</ActionName>
                <ActionNum>0</ActionNum>
            </PTZAction>
        </PTZActionList>
    </PTZ>
    <FaceMask Version="1.0">
        <Enable>false</Enable>
    </FaceMask>
    <LightAlarm Version="1.0">
        <Enable>false</Enable>
    </LightAlarm>
</Trigger>`

// console.log("string",stringHandle )


//// Anh chim sơn ca
// let arr = stringHandle.split('Trigger Version="1.0"')
// console.log("arr ",arr)

//     let arrFieldData = [
//         {label: 'NotifyAMS', enabled: null},
//         {label: 'BeepAlert', enabled: null},
//         {label: 'PTZ', enabled: null}
//     ]

//     let arrResult = [];
//     console.log("1",arr[1].split(`${"NotifyAMS"}`) )
//     console.log("2",arr[1].split(`${"NotifyAMS"}`)[1] )

//     console.log("3",arr[1].split(`${"NotifyAMS"}`)[1].split('Enable>') )
//     console.log("4",arr[1].split(`${"NotifyAMS"}`)[1].split('Enable>')[1] )
  
//     console.log("5",arr[1].split(`${"NotifyAMS"}`)[1].split('Enable>')[1].split('</') )
//     console.log("6",arr[1].split(`${"NotifyAMS"}`)[1].split('Enable>')[1].split('</')[0] )

    // arrFieldData.forEach(el => {


    //     let enabled = JSON.parse(arr[1].split(`${el.label}`)[1].split('Enable>')[1].split('</')[0] | false);
    //     console.log("enabled ", enabled)

    //     el.enabled = enabled === 0 ? false : true;
    //     arrResult.push(el);
    // })
    // console.log(arrResult);


// console.log(" test |" , 1 | 2)
// console.log(" test |" , false | 2 )


// CÁCH 1:
// const array = stringHandle.split(`Version="1.0">`)
// console.log("array", array)

// const arrayHandle =[]
//  for (let i =2; i< array.length; i++){
//     let element= array[i]
// const stringName= element.slice(element.indexOf(">\n    </")+8, element.indexOf((">\n    <"),element.indexOf(">\n    </")+1))
// const stringBool = element.slice(element.indexOf("<Enable>")+8, element.indexOf("</Enable>\n"))
// arrayHandle.push({key : stringName , value: stringBool})
// }

// console.log("arrayHandle",arrayHandle )


// CÁCH 2:

// const array = stringHandle.split(`Version="1.0">
//         <Enable>`)
// console.log("array", array)

// const arrayHandle =[]
//  for (let i =2; i< array.length; i++){
//     let element= array[i]
// const stringName= element.slice(element.indexOf(">\n    </")+8, element.indexOf((">\n    <"),element.indexOf(">\n    </")+1))
// const stringBool = element.slice(0, element.indexOf("</Enable>\n"))
// arrayHandle.push({key : stringName , value: stringBool})
// }

// console.log("arrayHandle",arrayHandle )

// const element = array[2]

// const stringBool = element.slice(element.indexOf("<Enable>")+8, element.indexOf("</Enable>\n"))
// console.log("stringBool", stringBool)
// const stringName = element.slice(element.indexOf(">\n    </")+8, element.indexOf((">\n    <"),element.indexOf(">\n    </")+1))
// console.log("stringName", stringName)

// console.log("array", array)


//BÀI TOÁN 3: 

const String3 = `HTTP HTTP/1.0 200 OK
Server: Server: CGI/2.0.5
Content-Length: 247
Content-Type: application/xml
Connection: close

<?xml version="1.0" encoding="UTF-8" ?>
<AudioStream Version="1.0">
    <AudioInMethod>microphone</AudioInMethod>
    <AudioInCodec>G.711U</AudioInCodec>
    <AudioInVolume>10</AudioInVolume>
    <AudioOutVolume>20</AudioOutVolume>
</AudioStream>`


    let arrFieldData = [
        {label: 'AudioInMethod', value: null},
        {label: 'AudioInVolume', value: null},
        {label: 'AudioOutVolume', value: null}
    ]

    arrFieldData.forEach((e) => {
       const value =  String3.split(e.label)[1].split(">")[1].split("<")[0]
       e.value = value
    })

    console.log("arrFieldData", arrFieldData)

    // const arrHanlde = String3.split("AudioInMethod")[1].split(">")[1].split("<")[0]
    // console.log("arrHanlde ",arrHanlde );

    console.log("", arrFieldData[label =="AudioInVolume"].value)



    </script>
    
</body>
</html>